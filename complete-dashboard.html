<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数据可视化仪表板 - 第2章图表展示</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .controls {
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        label {
            font-weight: 600;
            color: #495057;
        }
        
        select, button {
            padding: 10px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            background: white;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        select:focus, button:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }
        
        button {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            font-weight: 600;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.3);
        }
        
        .chart-container {
            padding: 30px;
            min-height: 500px;
            position: relative;
        }
        
        canvas {
            max-width: 100%;
            height: 400px !important;
        }
        
        .chart-info {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #4facfe;
        }
        
        .chart-info h3 {
            color: #495057;
            margin-bottom: 10px;
        }
        
        .chart-info p {
            color: #6c757d;
            line-height: 1.6;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .control-group {
                justify-content: space-between;
            }
            
            .chart-container {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📊 数据可视化仪表板</h1>
            <p>基于第2章.ipynb的完整图表展示 - 10种可视化类型</p>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <label for="chartSelector">图表类型:</label>
                <select id="chartSelector">
                    <option value="line">折线图</option>
                    <option value="bar">柱形图</option>
                    <option value="horizontalBar">条形图</option>
                    <option value="area">堆积面积图</option>
                    <option value="histogram">直方图</option>
                    <option value="pie">饼图</option>
                    <option value="scatter">散点图</option>
                    <option value="boxplot">箱形图</option>
                    <option value="radar">雷达图</option>
                    <option value="errorbar">误差棒图</option>
                </select>
            </div>
            
            <div class="control-group">
                <button id="downloadBtn">📥 下载图表</button>
            </div>
        </div>
        
        <div class="chart-container">
            <canvas id="chartCanvas"></canvas>
            <div class="chart-info">
                <h3>图表说明</h3>
                <p id="chartDescription">选择上方的图表类型查看详细信息和交互功能</p>
            </div>
        </div>
    </div>

    <script>
        // 示例数据集
        const datasets = {
            line: {
                labels: ['4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18'],
                datasets: [
                    {
                        label: '最高气温',
                        data: [32, 33, 34, 34, 33, 31, 30, 29, 30, 29, 26, 23, 21, 25, 31],
                        borderColor: '#ff6384',
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        tension: 0.1,
                        fill: false
                    },
                    {
                        label: '最低气温',
                        data: [19, 19, 20, 22, 22, 21, 22, 16, 18, 18, 17, 14, 15, 16, 16],
                        borderColor: '#36a2eb',
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        tension: 0.1,
                        fill: false
                    }
                ]
            },
            bar: {
                labels: ['FY2013', 'FY2014', 'FY2015', 'FY2016', 'FY2017', 'FY2018', 'FY2019'],
                datasets: [
                    {
                        label: '阿里巴巴GMV(亿元)',
                        data: [10770, 16780, 24440, 30920, 37670, 48200, 57270],
                        backgroundColor: [
                            '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', 
                            '#9966FF', '#FF9F40', '#8AC249'
                        ],
                        borderColor: [
                            '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', 
                            '#9966FF', '#FF9F40', '#8AC249'
                        ],
                        borderWidth: 2
                    }
                ]
            },
            horizontalBar: {
                labels: ['家政服务', '飞机票', '家具', '手机', '计算机', '汽车用品', '通信充值', '个人护理', '书报杂志', '餐饮旅游'],
                datasets: [
                    {
                        label: '网购替代率',
                        data: [0.959, 0.951, 0.935, 0.924, 0.893, 0.892, 0.865, 0.863, 0.860, 0.856],
                        backgroundColor: [
                            '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF',
                            '#FF9F40', '#8AC249', '#EA526F', '#6A0572', '#AB83A1'
                        ],
                        borderColor: [
                            '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF',
                            '#FF9F40', '#8AC249', '#EA526F', '#6A0572', '#AB83A1'
                        ],
                        borderWidth: 2
                    }
                ]
            },
            area: {
                labels: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
                datasets: [
                    {
                        label: '公司A',
                        data: [198, 215, 245, 222, 200, 236, 201, 253, 236, 200, 266, 290],
                        backgroundColor: 'rgba(255, 99, 132, 0.5)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        fill: true
                    },
                    {
                        label: '公司B',
                        data: [203, 236, 200, 236, 269, 216, 298, 333, 301, 349, 360, 368],
                        backgroundColor: 'rgba(54, 162, 235, 0.5)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        fill: true
                    },
                    {
                        label: '公司C',
                        data: [185, 205, 226, 199, 238, 200, 250, 209, 246, 219, 253, 288],
                        backgroundColor: 'rgba(255, 206, 86, 0.5)',
                        borderColor: 'rgba(255, 206, 86, 1)',
                        fill: true
                    }
                ]
            },
            histogram: {
                labels: ['0-10', '10-20', '20-30', '30-40', '40-50', '50-60', '60-70', '70-80', '80-90', '90-100'],
                datasets: [
                    {
                        label: '分数分布',
                        data: [5, 8, 12, 15, 20, 15, 12, 8, 3, 2],
                        backgroundColor: [
                            '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF',
                            '#FF9F40', '#8AC249', '#EA526F', '#6A0572', '#AB83A1'
                        ],
                        borderColor: [
                            '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF',
                            '#FF9F40', '#8AC249', '#EA526F', '#6A0572', '#AB83A1'
                        ],
                        borderWidth: 2
                    }
                ]
            },
            pie: {
                labels: ['购物', '人情往来', '餐饮美食', '通信物流', '生活日用', '交通出行', '休闲娱乐', '其他'],
                datasets: [
                    {
                        data: [800, 100, 1000, 200, 300, 200, 200, 200],
                        backgroundColor: [
                            '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40', '#8AC249', '#EA526F'
                        ],
                        borderColor: '#fff',
                        borderWidth: 2
                    }
                ]
            },
            scatter: {
                datasets: [
                    {
                        label: '汽车速度与制动距离',
                        data: [
                            { x: 10, y: 0.5 },
                            { x: 20, y: 2.0 },
                            { x: 30, y: 4.4 },
                            { x: 40, y: 7.9 },
                            { x: 50, y: 12.3 },
                            { x: 60, y: 17.7 },
                            { x: 70, y: 24.1 },
                            { x: 80, y: 31.5 },
                            { x: 90, y: 39.9 },
                            { x: 100, y: 49.2 },
                            { x: 110, y: 59.5 },
                            { x: 120, y: 70.8 },
                            { x: 130, y: 83.1 },
                            { x: 140, y: 96.4 },
                            { x: 150, y: 110.7 },
                            { x: 160, y: 126.0 },
                            { x: 170, y: 142.2 },
                            { x: 180, y: 159.4 },
                            { x: 190, y: 177.6 },
                            { x: 200, y: 196.8 }
                        ],
                        backgroundColor: 'rgba(255, 99, 132, 0.7)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                    }
                ]
            },
            boxplot: {
                labels: ['2018年', '2017年'],
                datasets: [
                    {
                        label: '全国发电量统计',
                        data: [
                            {
                                min: 5107.8,
                                q1: 5254.5,
                                median: 5443.3,
                                q3: 5550.6,
                                max: 6404.9
                            },
                            {
                                min: 4605.2,
                                q1: 4767.2,
                                median: 5168.9,
                                q3: 5219.6,
                                max: 6047.4
                            }
                        ],
                        backgroundColor: 'rgba(54, 162, 235, 0.5)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    }
                ]
            },
            radar: {
                labels: ['研究型(I)', '艺术型(A)', '社会型(S)', '企业型(E)', '传统型(C)', '现实型(R)'],
                datasets: [
                    {
                        label: '人员1',
                        data: [0.40, 0.32, 0.35, 0.30, 0.30, 0.88],
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        pointBackgroundColor: 'rgba(255, 99, 132, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(255, 99, 132, 1)'
                    },
                    {
                        label: '人员2',
                        data: [0.85, 0.35, 0.30, 0.40, 0.40, 0.30],
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        pointBackgroundColor: 'rgba(54, 162, 235, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(54, 162, 235, 1)'
                    }
                ]
            },
            errorbar: {
                labels: ['春季', '夏季', '秋季'],
                datasets: [
                    {
                        label: '树种A',
                        data: [2.04, 1.57, 1.63],
                        backgroundColor: 'rgba(255, 99, 132, 0.6)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 1
                    },
                    {
                        label: '树种B',
                        data: [1.69, 1.61, 1.64],
                        backgroundColor: 'rgba(54, 162, 235, 0.6)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    }
                ]
            }
        };

        // 图表说明
        const chartDescriptions = {
            line: '使用plot()绘制折线图展示温度变化趋势',
            bar: '使用bar()绘制柱形图展示财务数据',
            horizontalBar: '使用barh()绘制条形图展示替代率数据',
            area: '使用stackplot()绘制堆积面积图展示费用变化',
            histogram: '使用hist()绘制直方图展示数据分布',
            pie: '使用pie()绘制饼图或圆环图展示消费占比',
            scatter: '使用scatter()绘制散点图或气泡图展示相关性',
            boxplot: '使用boxplot()绘制箱形图展示数据分布',
            radar: '绘制雷达图展示多维度数据比较',
            errorbar: '使用errorbar()绘制误差棒图展示数据的不确定性'
        };

        let currentChart = null;

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            const chartSelector = document.getElementById('chartSelector');
            const downloadBtn = document.getElementById('downloadBtn');
            
            // 初始化第一个图表
            renderChart('line');
            
            // 添加事件监听器
            chartSelector.addEventListener('change', function() {
                renderChart(this.value);
            });
            
            downloadBtn.addEventListener('click', function() {
                if (currentChart) {
                    const link = document.createElement('a');
                    link.download = 'chart.png';
                    link.href = currentChart.toBase64Image();
                    link.click();
                }
            });
        });

        function renderChart(chartType) {
            const ctx = document.getElementById('chartCanvas');
            const description = document.getElementById('chartDescription');
            
            // 销毁现有图表
            if (currentChart) {
                currentChart.destroy();
            }
            
            // 更新说明
            description.textContent = chartDescriptions[chartType] || '图表说明';
            
            // 获取数据
            const data = datasets[chartType];
            if (!data) return;
            
            // 根据图表类型渲染
            switch (chartType) {
                case 'line':
                    currentChart = new Chart(ctx, {
                        type: 'line',
                        data: data,
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'top',
                                },
                                title: {
                                    display: true,
                                    text: '未来15天最高气温和最低气温'
                                }
                            }
                        }
                    });
                    break;
                    
                case 'bar':
                    currentChart = new Chart(ctx, {
                        type: 'bar',
                        data: data,
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'top',
                                },
                                title: {
                                    display: true,
                                    text: '2013—2019财年阿里巴巴GMV'
                                }
                            }
                        }
                    });
                    break;
                    
                case 'horizontalBar':
                    currentChart = new Chart(ctx, {
                        type: 'bar',
                        data: data,
                        options: {
                            indexAxis: 'y',
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'top',
                                },
                                title: {
                                    display: true,
                                    text: '各商品种类的网购替代率'
                                }
                            }
                        }
                    });
                    break;
                    
                case 'area':
                    currentChart = new Chart(ctx, {
                        type: 'line',
                        data: data,
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'top',
                                },
                                title: {
                                    display: true,
                                    text: '物流公司物流费用统计'
                                }
                            },
                            scales: {
                                y: {
                                    stacked: true
                                }
                            }
                        }
                    });
                    break;
                    
                case 'histogram':
                    currentChart = new Chart(ctx, {
                        type: 'bar',
                        data: data,
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'top',
                                },
                                title: {
                                    display: true,
                                    text: '人脸识别的灰度直方图'
                                }
                            }
                        }
                    });
                    break;
                    
                case 'pie':
                    currentChart = new Chart(ctx, {
                        type: 'pie',
                        data: data,
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'top',
                                },
                                title: {
                                    display: true,
                                    text: '支付宝月账单报告'
                                }
                            }
                        }
                    });
                    break;
                    
                case 'scatter':
                    currentChart = new Chart(ctx, {
                        type: 'scatter',
                        data: data,
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'top',
                                },
                                title: {
                                    display: true,
                                    text: '汽车速度与制动距离的关系'
                                }
                            },
                            scales: {
                                x: {
                                    type: 'linear',
                                    position: 'bottom'
                                }
                            }
                        }
                    });
                    break;
                    
                case 'boxplot':
                case 'radar':
                case 'errorbar':
                    // 简化处理复杂图表类型
                    currentChart = new Chart(ctx, {
                        type: 'bar',
                        data: data,
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'top',
                                },
                                title: {
                                    display: true,
                                    text: '数据可视化图表'
                                }
                            }
                        }
                    });
                    break;
            }
        }
    </script>
</body>
</html>
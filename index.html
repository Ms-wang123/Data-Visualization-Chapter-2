<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®å¯è§†åŒ–ä»ªè¡¨æ¿ - ç¬¬2ç« å›¾è¡¨å®Œæ•´å±•ç¤º</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <style>
        @charset "UTF-8";
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: "Microsoft YaHei", "SimHei", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* å¤´éƒ¨æ ·å¼ */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }

        .header h1 {
            color: #4a5568;
            font-size: 2.2rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .header p {
            color: #718096;
            font-size: 1.1rem;
        }

        /* å›¾è¡¨é€‰æ‹©å™¨ */
        .chart-selector {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .selector-title {
            font-size: 1.3rem;
            color: #4a5568;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }

        .chart-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .chart-btn {
            padding: 15px 20px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .chart-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .chart-btn.active {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            transform: translateY(-2px);
        }

        /* å›¾è¡¨å®¹å™¨ */
        .chart-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            min-height: 500px;
        }

        .chart-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .chart-title {
            font-size: 1.8rem;
            color: #4a5568;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .chart-description {
            color: #718096;
            font-size: 1rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .chart-canvas {
            position: relative;
            height: 450px;
            width: 100%;
        }

        /* æ§åˆ¶é¢æ¿ */
        .control-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .control-title {
            font-size: 1.3rem;
            color: #4a5568;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }

        .control-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .control-item {
            text-align: center;
        }

        .control-item label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #4a5568;
        }

        .control-item button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 8px;
            background: #667eea;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .control-item button:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .chart-buttons {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
            
            .chart-canvas {
                height: 350px;
            }
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #e2e8f0;
            border-left: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* æˆåŠŸæ¶ˆæ¯ */
        .success-message {
            background: #c6f6d5;
            color: #22543d;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
            border: 1px solid #9ae6b4;
        }

        .error-message {
            background: #fed7d7;
            color: #742a2a;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
            border: 1px solid #fc8181;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <h1>ğŸ“Š æ•°æ®å¯è§†åŒ–ä»ªè¡¨æ¿</h1>
            <p>åŸºäºç¬¬2ç« matplotlibå›¾è¡¨çš„å®Œæ•´äº¤äº’å¼å±•ç¤º</p>
        </div>

        <!-- å›¾è¡¨é€‰æ‹©å™¨ -->
        <div class="chart-selector">
            <h2 class="selector-title">é€‰æ‹©å›¾è¡¨ç±»å‹</h2>
            <div class="chart-buttons">
                <button class="chart-btn active" data-chart="line">ğŸ“ˆ æŠ˜çº¿å›¾</button>
                <button class="chart-btn" data-chart="bar">ğŸ“Š æŸ±å½¢å›¾</button>
                <button class="chart-btn" data-chart="horizontalBar">ğŸ“‰ æ¡å½¢å›¾</button>
                <button class="chart-btn" data-chart="area">ğŸ“ˆ å †ç§¯é¢ç§¯å›¾</button>
                <button class="chart-btn" data-chart="histogram">ğŸ“Š ç›´æ–¹å›¾</button>
                <button class="chart-btn" data-chart="pie">ğŸ¥§ é¥¼å›¾</button>
                <button class="chart-btn" data-chart="scatter">ğŸ”µ æ•£ç‚¹å›¾</button>
                <button class="chart-btn" data-chart="boxplot">ğŸ“¦ ç®±å½¢å›¾</button>
                <button class="chart-btn" data-chart="radar">ğŸ¯ é›·è¾¾å›¾</button>
                <button class="chart-btn" data-chart="errorbar">ğŸ“ è¯¯å·®æ£’å›¾</button>
            </div>
        </div>

        <!-- å›¾è¡¨å®¹å™¨ -->
        <div class="chart-container">
            <div class="chart-header">
                <h2 class="chart-title" id="chartTitle">æœªæ¥15å¤©æœ€é«˜æ°”æ¸©å’Œæœ€ä½æ°”æ¸©</h2>
                <p class="chart-description" id="chartDescription">ä½¿ç”¨plot()ç»˜åˆ¶æŠ˜çº¿å›¾å±•ç¤ºæ¸©åº¦å˜åŒ–è¶‹åŠ¿</p>
            </div>
            <div class="chart-canvas">
                <canvas id="myChart"></canvas>
            </div>
        </div>

        <!-- æ§åˆ¶é¢æ¿ -->
        <div class="control-panel">
            <h3 class="control-title">å›¾è¡¨æ§åˆ¶</h3>
            <div class="control-group">
                <div class="control-item">
                    <button onclick="resetChart()">ğŸ”„ é‡ç½®å›¾è¡¨</button>
                    <button onclick="downloadChart()">ğŸ’¾ ä¸‹è½½å›¾è¡¨</button>
                </div>
                <div class="control-item">
                    <button onclick="toggleAnimation()">ğŸ¬ åˆ‡æ¢åŠ¨ç”»</button>
                    <button onclick="randomizeData()">ğŸ² éšæœºæ•°æ®</button>
                </div>
                <div class="control-item">
                    <button onclick="showData()">ğŸ“‹ æ˜¾ç¤ºæ•°æ®</button>
                    <button onclick="showCode()">ğŸ“ æŸ¥çœ‹ä»£ç </button>
                </div>
            </div>
        </div>

        <!-- æ¶ˆæ¯æ˜¾ç¤ºåŒºåŸŸ -->
        <div id="messageArea"></div>
    </div>

    <script>
        // å›¾è¡¨æ•°æ®é›†
        const chartData = {
            line: {
                title: 'æœªæ¥15å¤©æœ€é«˜æ°”æ¸©å’Œæœ€ä½æ°”æ¸©',
                description: 'ä½¿ç”¨plot()ç»˜åˆ¶æŠ˜çº¿å›¾å±•ç¤ºæ¸©åº¦å˜åŒ–è¶‹åŠ¿',
                labels: ['4æ—¥', '5æ—¥', '6æ—¥', '7æ—¥', '8æ—¥', '9æ—¥', '10æ—¥', '11æ—¥', '12æ—¥', '13æ—¥', '14æ—¥', '15æ—¥', '16æ—¥', '17æ—¥', '18æ—¥'],
                datasets: [
                    {
                        label: 'æœ€é«˜æ°”æ¸©(Â°C)',
                        data: [32, 33, 34, 34, 33, 31, 30, 29, 30, 29, 26, 23, 21, 25, 31],
                        borderColor: 'rgb(255, 99, 132)',
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        tension: 0.1,
                        borderWidth: 3
                    },
                    {
                        label: 'æœ€ä½æ°”æ¸©(Â°C)',
                        data: [19, 19, 20, 22, 22, 21, 22, 16, 18, 18, 17, 14, 15, 16, 16],
                        borderColor: 'rgb(54, 162, 235)',
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        tension: 0.1,
                        borderWidth: 3
                    }
                ]
            },
            bar: {
                title: '2013â€”2019è´¢å¹´é˜¿é‡Œå·´å·´æ·˜å®å’Œå¤©çŒ«å¹³å°çš„GMV',
                description: 'ä½¿ç”¨bar()ç»˜åˆ¶æŸ±å½¢å›¾å±•ç¤ºè´¢åŠ¡æ•°æ®å¢é•¿è¶‹åŠ¿',
                labels: ['FY2013', 'FY2014', 'FY2015', 'FY2016', 'FY2017', 'FY2018', 'FY2019'],
                datasets: [
                    {
                        label: 'GMV(äº¿å…ƒ)',
                        data: [10770, 16780, 24440, 30920, 37670, 48200, 57270],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(153, 102, 255, 0.7)',
                            'rgba(255, 159, 64, 0.7)',
                            'rgba(46, 204, 113, 0.7)'
                        ],
                        borderColor: [
                            'rgb(255, 99, 132)',
                            'rgb(54, 162, 235)',
                            'rgb(255, 206, 86)',
                            'rgb(75, 192, 192)',
                            'rgb(153, 102, 255)',
                            'rgb(255, 159, 64)',
                            'rgb(46, 204, 113)'
                        ],
                        borderWidth: 2
                    }
                ]
            },
            horizontalBar: {
                title: 'å„å•†å“ç§ç±»çš„ç½‘è´­æ›¿ä»£ç‡',
                description: 'ä½¿ç”¨barh()ç»˜åˆ¶æ¡å½¢å›¾å±•ç¤ºä¸åŒå•†å“ç±»åˆ«çš„ç½‘è´­æ›¿ä»£ç‡',
                labels: ['å®¶æ”¿æœåŠ¡', 'é£æœºç¥¨', 'å®¶å…·', 'æ‰‹æœº', 'è®¡ç®—æœº', 'æ±½è½¦ç”¨å“', 'é€šä¿¡å……å€¼', 'ä¸ªäººæŠ¤ç†', 'ä¹¦æŠ¥æ‚å¿—', 'é¤é¥®æ—…æ¸¸'],
                datasets: [
                    {
                        label: 'ç½‘è´­æ›¿ä»£ç‡',
                        data: [0.959, 0.951, 0.935, 0.924, 0.893, 0.892, 0.865, 0.863, 0.860, 0.856],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(153, 102, 255, 0.7)',
                            'rgba(255, 159, 64, 0.7)',
                            'rgba(46, 204, 113, 0.7)',
                            'rgba(231, 76, 60, 0.7)',
                            'rgba(241, 196, 15, 0.7)',
                            'rgba(52, 73, 94, 0.7)'
                        ],
                        borderColor: [
                            'rgb(255, 99, 132)',
                            'rgb(54, 162, 235)',
                            'rgb(255, 206, 86)',
                            'rgb(75, 192, 192)',
                            'rgb(153, 102, 255)',
                            'rgb(255, 159, 64)',
                            'rgb(46, 204, 113)',
                            'rgb(231, 76, 60)',
                            'rgb(241, 196, 15)',
                            'rgb(52, 73, 94)'
                        ],
                        borderWidth: 2
                    }
                ]
            },
            area: {
                title: 'ç‰©æµå…¬å¸ç‰©æµè´¹ç”¨ç»Ÿè®¡',
                description: 'ä½¿ç”¨stackplot()ç»˜åˆ¶å †ç§¯é¢ç§¯å›¾å±•ç¤ºä¸‰å®¶ç‰©æµå…¬å¸çš„è´¹ç”¨å˜åŒ–',
                labels: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ', '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'],
                datasets: [
                    {
                        label: 'å…¬å¸A',
                        data: [198, 215, 245, 222, 200, 236, 201, 253, 236, 200, 266, 290],
                        backgroundColor: 'rgba(255, 99, 132, 0.6)',
                        borderColor: 'rgb(255, 99, 132)',
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: 'å…¬å¸B',
                        data: [203, 236, 200, 236, 269, 216, 298, 333, 301, 349, 360, 368],
                        backgroundColor: 'rgba(54, 162, 235, 0.6)',
                        borderColor: 'rgb(54, 162, 235)',
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: 'å…¬å¸C',
                        data: [185, 205, 226, 199, 238, 200, 250, 209, 246, 219, 253, 288],
                        backgroundColor: 'rgba(255, 206, 86, 0.6)',
                        borderColor: 'rgb(255, 206, 86)',
                        fill: true,
                        tension: 0.4
                    }
                ]
            },
            histogram: {
                title: 'äººè„¸è¯†åˆ«çš„ç°åº¦ç›´æ–¹å›¾',
                description: 'ä½¿ç”¨hist()ç»˜åˆ¶ç›´æ–¹å›¾å±•ç¤ºå›¾åƒç°åº¦å€¼åˆ†å¸ƒ',
                labels: ['0-50', '50-100', '100-150', '150-200', '200-250', '250-300', '300-350', '350-400', '400-450', '450-500'],
                datasets: [
                    {
                        label: 'åƒç´ æ•°é‡',
                        data: [1250, 2340, 3456, 4567, 5678, 4321, 3210, 2109, 1234, 567],
                        backgroundColor: 'rgba(75, 192, 192, 0.7)',
                        borderColor: 'rgb(75, 192, 192)',
                        borderWidth: 2
                    }
                ]
            },
            pie: {
                title: 'æ”¯ä»˜å®æœˆè´¦å•æŠ¥å‘Š',
                description: 'ä½¿ç”¨pie()ç»˜åˆ¶é¥¼å›¾å±•ç¤ºæœˆåº¦æ¶ˆè´¹åˆ†ç±»å æ¯”',
                labels: ['è´­ç‰©', 'äººæƒ…å¾€æ¥', 'é¤é¥®ç¾é£Ÿ', 'é€šä¿¡ç‰©æµ', 'ç”Ÿæ´»æ—¥ç”¨', 'äº¤é€šå‡ºè¡Œ', 'ä¼‘é—²å¨±ä¹', 'å…¶ä»–'],
                datasets: [
                    {
                        data: [800, 100, 1000, 200, 300, 200, 200, 200],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.8)',
                            'rgba(54, 162, 235, 0.8)',
                            'rgba(255, 206, 86, 0.8)',
                            'rgba(75, 192, 192, 0.8)',
                            'rgba(153, 102, 255, 0.8)',
                            'rgba(255, 159, 64, 0.8)',
                            'rgba(46, 204, 113, 0.8)',
                            'rgba(52, 73, 94, 0.8)'
                        ],
                        borderColor: '#fff',
                        borderWidth: 3
                    }
                ]
            },
            scatter: {
                title: 'æ±½è½¦é€Ÿåº¦ä¸åˆ¶åŠ¨è·ç¦»çš„å…³ç³»',
                description: 'ä½¿ç”¨scatter()ç»˜åˆ¶æ•£ç‚¹å›¾å±•ç¤ºé€Ÿåº¦ä¸åˆ¶åŠ¨è·ç¦»çš„ç›¸å…³æ€§',
                datasets: [
                    {
                        label: 'æµ‹è¯•æ•°æ®',
                        data: [
                            {x: 10, y: 0.5},
                            {x: 20, y: 2.0},
                            {x: 30, y: 4.4},
                            {x: 40, y: 7.9},
                            {x: 50, y: 12.3},
                            {x: 60, y: 17.7},
                            {x: 70, y: 24.1},
                            {x: 80, y: 31.5},
                            {x: 90, y: 39.9},
                            {x: 100, y: 49.2},
                            {x: 110, y: 59.5},
                            {x: 120, y: 70.8},
                            {x: 130, y: 83.1},
                            {x: 140, y: 96.4},
                            {x: 150, y: 110.7},
                            {x: 160, y: 126.0},
                            {x: 170, y: 142.2},
                            {x: 180, y: 159.4},
                            {x: 190, y: 177.6},
                            {x: 200, y: 196.8}
                        ],
                        backgroundColor: 'rgba(255, 99, 132, 0.7)',
                        borderColor: 'rgb(255, 99, 132)',
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }
                ]
            },
            boxplot: {
                title: '2017å¹´å’Œ2018å¹´å…¨å›½å‘ç”µé‡ç»Ÿè®¡',
                description: 'ä½¿ç”¨boxplot()ç»˜åˆ¶ç®±å½¢å›¾å±•ç¤ºä¸¤å¹´å‘ç”µé‡çš„åˆ†å¸ƒæƒ…å†µ',
                labels: ['2018å¹´', '2017å¹´'],
                datasets: [
                    {
                        label: 'å‘ç”µé‡(äº¿åƒç“¦æ—¶)',
                        data: [
                            [5200, 5254.5, 5283.4, 5443.3, 6404.9],
                            [4605.2, 4767.2, 5168.9, 5219.6, 6047.4]
                        ],
                        backgroundColor: ['rgba(54, 162, 235, 0.6)', 'rgba(255, 99, 132, 0.6)'],
                        borderColor: ['rgb(54, 162, 235)', 'rgb(255, 99, 132)'],
                        borderWidth: 2
                    }
                ]
            },
            radar: {
                title: 'éœå…°å¾·èŒä¸šå…´è¶£æµ‹è¯•',
                description: 'ç»˜åˆ¶é›·è¾¾å›¾å±•ç¤ºå…­ä¸ªç»´åº¦çš„èŒä¸šå…´è¶£åˆ†å¸ƒ',
                labels: ['ç ”ç©¶å‹(I)', 'è‰ºæœ¯å‹(A)', 'ç¤¾ä¼šå‹(S)', 'ä¼ä¸šå‹(E)', 'ä¼ ç»Ÿå‹(C)', 'ç°å®å‹(R)'],
                datasets: [
                    {
                        label: 'æµ‹è¯•è€…A',
                        data: [0.40, 0.32, 0.35, 0.30, 0.30, 0.88],
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderColor: 'rgb(255, 99, 132)',
                        pointBackgroundColor: 'rgb(255, 99, 132)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(255, 99, 132)',
                        borderWidth: 2
                    },
                    {
                        label: 'æµ‹è¯•è€…B',
                        data: [0.85, 0.35, 0.30, 0.40, 0.40, 0.30],
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        borderColor: 'rgb(54, 162, 235)',
                        pointBackgroundColor: 'rgb(54, 162, 235)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(54, 162, 235)',
                        borderWidth: 2
                    }
                ]
            },
            errorbar: {
                title: '4ä¸ªæ ‘ç§ä¸åŒå­£èŠ‚çš„ç»†æ ¹ç”Ÿç‰©é‡',
                description: 'ä½¿ç”¨errorbar()ç»˜åˆ¶è¯¯å·®æ£’å›¾å±•ç¤ºç”Ÿç‰©é‡æµ‹é‡çš„ä¸ç¡®å®šæ€§',
                labels: ['æ˜¥å­£', 'å¤å­£', 'ç§‹å­£'],
                datasets: [
                    {
                        label: 'æ ‘ç§A',
                        data: [2.04, 1.57, 1.63],
                        backgroundColor: 'rgba(255, 99, 132, 0.6)',
                        borderColor: 'rgb(255, 99, 132)',
                        borderWidth: 2,
                        errorBars: [0.16, 0.08, 0.10]
                    },
                    {
                        label: 'æ ‘ç§B',
                        data: [1.69, 1.61, 1.64],
                        backgroundColor: 'rgba(54, 162, 235, 0.6)',
                        borderColor: 'rgb(54, 162, 235)',
                        borderWidth: 2,
                        errorBars: [0.27, 0.14, 0.14]
                    },
                    {
                        label: 'æ ‘ç§C',
                        data: [4.65, 4.99, 4.94],
                        backgroundColor: 'rgba(255, 206, 86, 0.6)',
                        borderColor: 'rgb(255, 206, 86)',
                        borderWidth: 2,
                        errorBars: [0.34, 0.32, 0.29]
                    },
                    {
                        label: 'æ ‘ç§D',
                        data: [3.39, 2.33, 4.10],
                        backgroundColor: 'rgba(75, 192, 192, 0.6)',
                        borderColor: 'rgb(75, 192, 192)',
                        borderWidth: 2,
                        errorBars: [0.23, 0.23, 0.39]
                    }
                ]
            }
        };

        let currentChart = null;
        let currentChartType = 'line';
        let animationEnabled = true;

        // åˆå§‹åŒ–å›¾è¡¨
        function initChart(type = 'line') {
            const ctx = document.getElementById('myChart').getContext('2d');
            const data = chartData[type];
            
            // æ›´æ–°æ ‡é¢˜å’Œæè¿°
            document.getElementById('chartTitle').textContent = data.title;
            document.getElementById('chartDescription').textContent = data.description;
            
            // é”€æ¯ç°æœ‰å›¾è¡¨
            if (currentChart) {
                currentChart.destroy();
            }
            
            // é…ç½®é€‰é¡¹
            const options = {
                responsive: true,
                maintainAspectRatio: false,
                animation: {
                    duration: animationEnabled ? 1000 : 0
                },
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                        labels: {
                            font: {
                                family: "'Microsoft YaHei', 'SimHei', sans-serif",
                                size: 14
                            }
                        }
                    },
                    tooltip: {
                        enabled: true,
                        mode: 'index',
                        intersect: false,
                        titleFont: {
                            family: "'Microsoft YaHei', 'SimHei', sans-serif"
                        },
                        bodyFont: {
                            family: "'Microsoft YaHei', 'SimHei', sans-serif"
                        }
                    }
                },
                scales: {
                    x: {
                        grid: {
                            display: true,
                            color: 'rgba(0, 0, 0, 0.1)'
                        },
                        ticks: {
                            font: {
                                family: "'Microsoft YaHei', 'SimHei', sans-serif",
                                size: 12
                            }
                        }
                    },
                    y: {
                        grid: {
                            display: true,
                            color: 'rgba(0, 0, 0, 0.1)'
                        },
                        ticks: {
                            font: {
                                family: "'Microsoft YaHei', 'SimHei', sans-serif",
                                size: 12
                            }
                        }
                    }
                }
            };
            
            // ç‰¹æ®Šå›¾è¡¨ç±»å‹çš„é…ç½®
            let chartConfig = {
                type: type === 'horizontalBar' ? 'bar' : type,
                data: data,
                options: options
            };
            
            // æ°´å¹³æ¡å½¢å›¾é…ç½®
            if (type === 'horizontalBar') {
                chartConfig.options.indexAxis = 'y';
            }
            
            // é¥¼å›¾é…ç½®
            if (type === 'pie') {
                chartConfig.options.scales = {};
                chartConfig.options.plugins.tooltip.callbacks = {
                    label: function(context) {
                        const label = context.label || '';
                        const value = context.parsed;
                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                        const percentage = Math.round((value / total) * 100);
                        return `${label}: ${value}å…ƒ (${percentage}%)`;
                    }
                };
            }
            
            // æ•£ç‚¹å›¾é…ç½®
            if (type === 'scatter') {
                chartConfig.type = 'scatter';
            }
            
            // é›·è¾¾å›¾é…ç½®
            if (type === 'radar') {
                chartConfig.type = 'radar';
                chartConfig.options.scales = {
                    r: {
                        beginAtZero: true,
                        max: 1,
                        ticks: {
                            font: {
                                family: "'Microsoft YaHei', 'SimHei', sans-serif",
                                size: 12
                            }
                        },
                        pointLabels: {
                            font: {
                                family: "'Microsoft YaHei', 'SimHei', sans-serif",
                                size: 14
                            }
                        }
                    }
                };
            }
            
            // ç®±å½¢å›¾æ¨¡æ‹Ÿï¼ˆç”¨æŸ±å½¢å›¾ä»£æ›¿ï¼‰
            if (type === 'boxplot') {
                chartConfig.type = 'bar';
                chartConfig.data.datasets = data.datasets.map((dataset, index) => ({
                    ...dataset,
                    data: dataset.data.map(values => [
                        values[0], // min
                        values[2], // median
                        values[4]  // max
                    ])
                }));
            }
            
            // è¯¯å·®æ£’å›¾ï¼ˆç”¨æŸ±å½¢å›¾æ¨¡æ‹Ÿï¼‰
            if (type === 'errorbar') {
                chartConfig.type = 'bar';
                chartConfig.data.datasets = data.datasets;
                // æ·»åŠ è¯¯å·®æ£’çš„è§†è§‰æ•ˆæœ
                chartConfig.options.plugins.tooltip.callbacks = {
                    label: function(context) {
                        const label = context.dataset.label || '';
                        const value = context.parsed.y;
                        const errorBar = context.dataset.errorBars[context.dataIndex];
                        return `${label}: ${value} Â± ${errorBar}`;
                    }
                };
            }
            
            // åˆ›å»ºæ–°å›¾è¡¨
            currentChart = new Chart(ctx, chartConfig);
            currentChartType = type;
        }

        // é‡ç½®å›¾è¡¨
        function resetChart() {
            initChart(currentChartType);
            showMessage('å›¾è¡¨å·²é‡ç½®', 'success');
        }

        // ä¸‹è½½å›¾è¡¨
        function downloadChart() {
            const link = document.createElement('a');
            link.download = `${currentChartType}-chart.png`;
            link.href = currentChart.toBase64Image();
            link.click();
            showMessage('å›¾è¡¨ä¸‹è½½æˆåŠŸ', 'success');
        }

        // åˆ‡æ¢åŠ¨ç”»
        function toggleAnimation() {
            animationEnabled = !animationEnabled;
            initChart(currentChartType);
            showMessage(`åŠ¨ç”»å·²${animationEnabled ? 'å¼€å¯' : 'å…³é—­'}`, 'success');
        }

        // éšæœºæ•°æ®
        function randomizeData() {
            const data = chartData[currentChartType];
            data.datasets.forEach(dataset => {
                if (currentChartType === 'scatter') {
                    dataset.data = dataset.data.map(point => ({
                        x: point.x,
                        y: Math.random() * 200
                    }));
                } else if (currentChartType === 'pie') {
                    const total = 3000;
                    dataset.data = dataset.data.map(() => Math.random() * 500 + 100);
                } else {
                    dataset.data = dataset.data.map(() => Math.random() * 100 + 20);
                }
            });
            initChart(currentChartType);
            showMessage('æ•°æ®å·²éšæœºç”Ÿæˆ', 'success');
        }

        // æ˜¾ç¤ºæ•°æ®
        function showData() {
            const data = chartData[currentChartType];
            console.log('å›¾è¡¨æ•°æ®:', data);
            showMessage('æ•°æ®å·²åœ¨æ§åˆ¶å°æ˜¾ç¤ºï¼ŒæŒ‰F12æŸ¥çœ‹', 'success');
        }

        // æ˜¾ç¤ºä»£ç 
        function showCode() {
            const codes = {
                line: `# æŠ˜çº¿å›¾ä»£ç ç¤ºä¾‹
import matplotlib.pyplot as plt
import numpy as np

x = np.arange(4, 19)
y_max = np.array([32, 33, 34, 34, 33, 31, 30, 29, 30, 29, 26, 23, 21, 25, 31])
y_min = np.array([19, 19, 20, 22, 22, 21, 22, 16, 18, 18, 17, 14, 15, 16, 16])

plt.plot(x, y_max)
plt.plot(x, y_min)
plt.show()`,
                bar: `# æŸ±å½¢å›¾ä»£ç ç¤ºä¾‹
import matplotlib.pyplot as plt
import numpy as np

x = np.arange(1, 8)
y = np.array([10770, 16780, 24440, 30920, 37670, 48200, 57270])

plt.bar(x, y, tick_label=["FY2013", "FY2014", "FY2015", "FY2016", "FY2017", "FY2018", "FY2019"])
plt.show()`
            };
            
            const code = codes[currentChartType] || '# æŸ¥çœ‹ç¬¬2ç« Jupyter Notebookè·å–å®Œæ•´ä»£ç ';
            console.log('Pythonä»£ç :', code);
            showMessage('ä»£ç å·²åœ¨æ§åˆ¶å°æ˜¾ç¤ºï¼ŒæŒ‰F12æŸ¥çœ‹', 'success');
        }

        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(text, type = 'success') {
            const messageArea = document.getElementById('messageArea');
            const messageClass = type === 'success' ? 'success-message' : 'error-message';
            messageArea.innerHTML = `<div class="${messageClass}">${text}</div>`;
            setTimeout(() => {
                messageArea.innerHTML = '';
            }, 3000);
        }

        // äº‹ä»¶ç›‘å¬å™¨
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–é»˜è®¤å›¾è¡¨
            initChart('line');
            
            // å›¾è¡¨æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            const chartButtons = document.querySelectorAll('.chart-btn');
            chartButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    // ç§»é™¤æ‰€æœ‰activeç±»
                    chartButtons.forEach(b => b.classList.remove('active'));
                    // æ·»åŠ activeç±»åˆ°å½“å‰æŒ‰é’®
                    this.classList.add('active');
                    // åˆå§‹åŒ–å¯¹åº”å›¾è¡¨
                    const chartType = this.getAttribute('data-chart');
                    initChart(chartType);
                });
            });
        });

        // é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', function(event) {
            if (event.ctrlKey && event.key === 'r') {
                event.preventDefault();
                resetChart();
            } else if (event.ctrlKey && event.key === 's') {
                event.preventDefault();
                downloadChart();
            } else if (event.ctrlKey && event.key === 'd') {
                event.preventDefault();
                showData();
            }
        });
    </script>
</body>
</html>